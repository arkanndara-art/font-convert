<!DOCTYPE html>
<html lang="ku" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙˆÛ•Ø±Ú¯ÛÚ•ÛŒ ÙÛ†Ù†Øª Ùˆ ÙØ§ÛŒÙ„ </title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Noto+Sans+Arabic:wght@400;700&family=Lateef&family=Harmattan&family=Reem+Kufi&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js"></script>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, sans-serif; transition: 0.2s; }
        body { background: #f4f7f6; min-height: 100vh; display: flex; flex-direction: column; }
        body.dark-mode { background: #121212; color: #ffffff; }

        .header { 
            background: white; padding: 10px 20px; border-bottom: 3px solid #2e7d32; 
            display: grid; 
            grid-template-columns: 130px 1.5fr auto 0.5fr auto; 
            align-items: center;
            position: sticky; top: 0; z-index: 1000; gap: 15px;
        }
        .dark-mode .header { background: #1e1e1e; border-bottom-color: #4caf50; }

        .h-right { font-family: 'Amiri', serif; font-weight: bold; color: #2e7d32; font-size: 14px; white-space: nowrap; }
        .dark-mode .h-right { color: #4caf50; }

        .h-news { overflow: hidden; border-right: 1px solid #ddd; padding-right: 15px; max-width: 100%; }
        #news-link { 
            text-decoration: none; color: #555; font-size: 13px; display: block; 
            white-space: normal; line-height: 1.2; max-height: 32px; overflow: hidden;
            display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;
        }
        .dark-mode #news-link { color: #bbb; }
        .source-tag { color: #d32f2f; font-weight: bold; }

        .h-center { text-align: center; display: flex; flex-direction: column; justify-content: center; padding: 0 10px; }
        .h-center h1 { font-family: 'Amiri', serif; font-size: 1.2rem; color: #2e7d32; margin: 0; line-height: 1; }
        .h-center span { font-size: 11px; color: #777; font-weight: bold; }
        .dark-mode .h-center h1 { color: #4caf50; }

        .h-left { display: flex; align-items: center; justify-content: flex-end; gap: 8px; }
        .stat-item { font-size: 11px; font-weight: bold; color: #555; background: #eee; padding: 5px 8px; border-radius: 6px; cursor: pointer; white-space: nowrap; }
        .dark-mode .stat-item { background: #333; color: #ddd; }
        
        .font-ctrl { display: flex; gap: 2px; background: #eee; border-radius: 6px; padding: 2px; }
        .dark-mode .font-ctrl { background: #333; }
        .font-btn { border: none; background: none; padding: 2px 6px; cursor: pointer; font-weight: bold; color: #333; font-size: 12px; }
        .dark-mode .font-btn { color: white; }

        .market-wrap { position: relative; }
        .market-drop { 
            display: none; position: absolute; top: 35px; left: 0; background: white; 
            min-width: 190px; box-shadow: 0 5px 15px rgba(0,0,0,0.2); 
            padding: 10px; border-radius: 8px; z-index: 100;
        }
        .dark-mode .market-drop { background: #252525; border: 1px solid #444; }
        .market-drop div { font-size: 12px; padding: 4px 0; border-bottom: 1px solid #eee; color: #333; }
        .dark-mode .market-drop div { border-bottom-color: #333; color: #eee; }
        .show { display: block; }

        .container { flex: 1; display: flex; flex-direction: column; padding: 10px; gap: 1px; max-width: 100%; margin: 0 auto; width: 100%; }
        textarea { flex: 1; min-height: 400px; padding: 20px; border-radius: 7px; border: 2px solid #ddd; font-size: 20px; line-height: 1.8; resize: none; text-align: right; direction: rtl; outline: none; }
        .dark-mode textarea { background: #1e1e1e; color: #eee; border-color: #333; }
        
        .btn-group { display: grid; grid-template-columns: repeat(auto-fit, minmax(110px, 1fr)); gap: 7px; margin-top: 2px; }
        button, .btn-file { padding: 7px; border: none; cursor: pointer; font-weight: bold; border-radius: 8px; color: white; font-size: 14px; text-align: center; }
        .btn-uni { background: #4caf50; } .btn-ali { background: #2196f3; } .btn-copy { background: #607d8b; } .btn-clear { background: #f44336; } .btn-file { background: #333; }
        #status { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); background: #333; color: white; padding: 8px 18px; border-radius: 50px; display: none; z-index: 2000; }

        .modal { display: none; position: fixed; z-index: 3000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); backdrop-filter: blur(4px); }
        .modal-content { background-color: white; margin: 10% auto; padding: 25px; border-radius: 15px; width: 90%; max-width: 500px; position: relative; box-shadow: 0 10px 30px rgba(0,0,0,0.3); line-height: 1.6; }
        .dark-mode .modal-content { background-color: #1e1e1e; color: white; }
        .modal-header { border-bottom: 2px solid #eee; padding-bottom: 10px; margin-bottom: 15px; font-weight: bold; font-size: 1.2rem; color: #2e7d32; }
        .dark-mode .modal-header { border-bottom-color: #333; color: #4caf50; }
        .modal-body { font-size: 15px; }
        .modal-footer { margin-top: 20px; text-align: left; }
        .close-btn { background: #2e7d32; padding: 8px 20px; border-radius: 5px; color: white; border: none; cursor: pointer; }
    </style>
</head>
<body onload="initApp()">

    <div id="aboutModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">Ø¯Û•Ø±Ø¨Ø§Ø±Û•ÛŒ Ù¾Ú•Û†Ú˜Û•</div>
            <div class="modal-body">
                <p><strong>Ù†Ø§ÙˆÛŒ Ú¯Û•Ø´Û•Ù¾ÛØ¯Û•Ø±:</strong> Ø¦Ù‡â€ŒØ±ÙƒØ§Ù† Ø¯Ø§Ø±Ø§ </p>
                <p><strong>ÙˆÛ•Ø´Ø§Ù†ÛŒ Ù¾Ú•Û†Ú˜Û•Ú©Û•:</strong> 1.5</p>
                <p><strong> Ø¯Ø±ÙˆØ³ØªÚ©Ø±Ø¯Ù†:</strong> 2026</p>
                <p><strong>Ù…Ø§ÙÛŒ ÙƒÛ†Ù¾ÛŒÙƒØ±Ø¯Ù†:</strong> Ù¾Ø§Ø±ÛØ²Ø±Ø§ÙˆÙ‡â€Œ</p>
                <hr style="margin: 15px 0; opacity: 0.2;">
                <p><strong>Ø²Ø§Ù†ÛŒØ§Ø±ÛŒ Ù„Û•Ø³Û•Ø± Ø¨Û•Ø´Û•Ú©Ø§Ù†:</strong></p>
                <p>Ø¨Ù‡â€ŒØ´Ù‡â€Œ Ø²ÛŒÙ†Ø¯ÙˆÙˆÙ‡â€ŒÙƒØ§Ù†ÛŒ Ù¾Ú•Û†Ú˜Ù‡â€ŒÙƒÙ‡ØŒ ÙˆÙ‡â€ŒÙƒ Ù…Ø§Ù†Ø´ÛØªÛŒ Ù‡Ù‡â€ŒÙˆØ§ÚµÙ‡â€ŒÙƒØ§Ù†ØŒ ÙƒØ§Øª Ùˆ Ø¨Ù‡â€ŒØ±ÙˆØ§Ø±ØŒ Ù†Ø±Ø®Ù‡â€ŒÙƒØ§Ù†ØŒ Ø®Û†ÛŒØ§Ù† Ù†ÙˆÛ Ø¯Ù‡â€ŒØ¨Ù†Ù‡â€ŒÙˆÛ• Ùˆ Ù„Ù‡â€Œ Ø³Ù‡â€ŒØ±Ú†Ø§ÙˆÙ‡â€Œ Ùˆ Ø¨Û†Ø±Ø³Ù‡â€Œ Ù…ØªÙ…Ø§Ù†Ù‡â€Œ Ù¾ÛÙƒØ±Ø§ÙˆÙ‡â€ŒÙƒØ§Ù†Ù‡â€ŒÙˆÙ‡â€Œ ÙˆÙ‡â€ŒØ±Ú¯ÛŒØ±Ø§ÙˆÙ†...</p>
            </div>
            <div class="modal-footer">
                <button class="close-btn" onclick="toggleAbout()">Ø¯Ø§Ø®Ø³ØªÙ†</button>
            </div>
        </div>
    </div>

    <div class="header">
        <div class="h-right" id="clock">...</div>
        <div class="h-news">
            <a id="news-link" href="#" target="_blank">Ù„Û†Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ù‡Û•ÙˆØ§ÚµÛ•Ú©Ø§Ù†...</a>
        </div>
        <div class="h-center">
            <h1>ÙˆÛ•Ø±Ú¯ÛÚ•ÛŒ ÙÛ†Ù†Øª Ùˆ ÙØ§ÛŒÙ„</h1>
            <span>Arkan Dara</span>
        </div>
        <div style="flex: 1;"></div>
        <div class="h-left">
            <select class="stat-item" id="fontSelect" onchange="changeFont()" style="border:none; outline:none;">
                <option value="'Noto Sans Arabic', sans-serif">ÙÛ†Ù†ØªÛŒ Ù†Û†ØªÛ†</option>
                <option value="'Amiri', serif">ÙÛ†Ù†ØªÛŒ Ø¦Û•Ù…ÛŒØ±ÛŒ</option>
                <option value="'Lateef', cursive">ÙÛ†Ù†ØªÛŒ Ù„Û•ØªÛŒÙ</option>
                <option value="'Reem Kufi', sans-serif">ÙÛ†Ù†ØªÛŒ Ú•ÛŒÙ… Ú©ÙˆÙÛŒ</option>
            </select>
            <div class="font-ctrl">
                <button class="font-btn" onclick="changeFontSize(2)">A+</button>
                <button class="font-btn" onclick="changeFontSize(-2)">A-</button>
            </div>
            <div class="market-wrap">
                <div class="stat-item" onclick="toggleM()">ğŸ“Š Ø¨Û†Ø±Ø³Û•</div>
                <div id="mDrop" class="market-drop">
                    <div id="gold">ğŸŸ¡ Ø²ÛÚ•: ...</div>
                    <div id="oil-brent">ğŸ›¢ï¸ Ø¨Ø±ÛÙ†Øª: ...</div>
                    <div id="oil-wti">â›½ ØªÛ•Ú©Ø³Ø§Ø³: ...</div>
                    <div id="oil-opec">ğŸŒ Ø¦Û†Ù¾ÛÚ©: ...</div>
                    <div id="oil-basra" style="border:none;">ğŸ‡®ğŸ‡¶ Ø¨Û•Ø³Ú•Û•: ...</div>
                </div>
            </div>
            <div class="stat-item" id="weather">ğŸŒ¡ï¸ --Â°C</div>
            <div class="stat-item" id="textStats">ÙˆØ´Û•: Ù </div>
            <div style="cursor:pointer; font-size:18px;" onclick="toggleT()">ğŸŒ™</div>
            <div style="cursor:pointer; font-size:18px;" onclick="toggleAbout()">â„¹ï¸</div>
        </div>
    </div>

    <div class="container">
        <textarea id="textBox" oninput="updateStats()" placeholder="Ù„ÛØ±Ù‡â€Œ Ø¨Ù†ÙˆÙˆØ³Ù‡â€Œ ÛŒØ§Ù† Ø¯Ù‡â€ŒÙ‚ÛÙƒ Ø¯Ø§Ø¨Ù†Û..."></textarea>
        <div class="btn-group">
            <button class="btn-uni" onclick="convert('toUni')">âœ¨ ÛŒÙˆÙ†ÛŒÚ©Û†Ø¯</button>
            <button class="btn-ali" onclick="convert('toAli')">ğŸ”„ Ø¹Û•Ù„ÛŒ Ú©Û•ÛŒ</button>
            <label for="fileInput" class="btn-file" style="cursor:pointer;"> ğŸ“ ÙØ§ÛŒÙ„ PDF & Word </label>
            <input type="file" id="fileInput" accept=".pdf,.docx" style="display:none;">
            <button class="btn-copy" onclick="copyText()">ğŸ“‹ Ú©Û†Ù¾ÛŒ</button>
            <button class="btn-clear" onclick="clearText()">ğŸ—‘ï¸ Ø³Ú•ÛŒÙ†Û•ÙˆÛ•</button>
        </div>
    </div>
    <div id="status"></div>

<script>
// --- Ù…Ø§Ù…Û•ÚµÛ•Ú©Ø±Ø¯Ù† Ù„Û•Ú¯Û•Úµ ÙØ§ÛŒÙ„Û•Ú©Ø§Ù† ---
document.getElementById('fileInput').addEventListener('change', function(e) {
    const file = e.target.files[0];
    if (!file) return;
    const reader = new FileReader();
    const extension = file.name.split('.').pop().toLowerCase();

    if (extension === 'pdf') {
        reader.onload = function() {
            const typedarray = new Uint8Array(this.result);
            pdfjsLib.getDocument(typedarray).promise.then(pdf => {
                let text = "";
                let count = pdf.numPages;
                let pagesPromises = [];
                for (let i = 1; i <= count; i++) {
                    pagesPromises.push(pdf.getPage(i).then(page => 
                        page.getTextContent().then(content => content.items.map(item => item.str).join(" "))
                    ));
                }
                Promise.all(pagesPromises).then(pagesText => {
                    document.getElementById('textBox').value = pagesText.join("\n");
                    updateStats();
                    showStatus("ğŸ“„ ÙØ§ÛŒÙ„ÛŒ PDF Ø®ÙˆÛÙ†Ø¯Ø±Ø§ÛŒÛ•ÙˆÛ•");
                });
            });
        };
        reader.readAsArrayBuffer(file);
    } 
    else if (extension === 'docx') {
        reader.onload = function(e) {
            mammoth.extractRawText({arrayBuffer: e.target.result})
                .then(result => {
                    document.getElementById('textBox').value = result.value;
                    updateStats();
                    showStatus("ğŸ“„ ÙØ§ÛŒÙ„ÛŒ Word Ø®ÙˆÛÙ†Ø¯Ø±Ø§ÛŒÛ•ÙˆÛ•");
                });
        };
        reader.readAsArrayBuffer(file);
    }
});

// --- ÙˆÛ•Ø±Ú¯ÛÚ•ÛŒ ÙÛ†Ù†Øª (Ù„Û†Ø¬ÛŒÚ©ÛŒ ØªÛÚ©Û•ÚµÚ©Ø±Ø§Ùˆ Ù„Û•Ú¯Û•Úµ Ù„Û†Ø¬ÛŒÚ©ÛŒ Ú©Û†Ù†ÛŒ 2012) ---
const conversionMap = [
    { uni: 'ÚµØ§', ali: 'Ù„Ø¢' }, { uni: 'ÚµØ§', ali: 'ÚµØ§' },
    { uni: 'Û', ali: 'ÙŠÙ' }, { uni: 'Û', ali: 'Û' },
    { uni: 'Û†', ali: 'Ø¤' }, { uni: 'Û†', ali: 'Û†' },  { uni: 'Û†', ali: 'ÙˆÙ' }, 
    { uni: 'Úµ', ali: 'Ù„Ù' }, { uni: 'Úµ', ali: 'Úµ' },
    { uni: 'Ú•', ali: 'Ø±Ù' }, { uni: 'Ú•', ali: 'Ú•' },
    { uni: 'Ù¾', ali: 'Ø«' }, { uni: 'Ú†', ali: 'Ø¶' }, 
    { uni: 'Ú˜', ali: 'Ø°' }, { uni: 'Ú¤', ali: 'Ø¸' }, 
    { uni: 'Ú¯', ali: 'Ø·' }, { uni: 'Ù‡â€Œ', ali: 'Ø©' },  { uni: 'Û•', ali: 'Ù‡â€Œ' },   { ali: 'Ø©', uni: 'Ù‡â€Œ' },
    { uni: 'ÛŒ', ali: 'ÙŠ' }, { uni: 'Ú©', ali: 'Ùƒ' },
    // Ù¾Ø§Ø´Ú©Û†ÛŒ Ù„Û†Ø¬ÛŒÚ©ÛŒ Ú©Û†Ù† Ø¨Û† Ø­Ø§ÚµÛ•ØªÛ• ØªØ§ÛŒØ¨Û•ØªÛ•Ú©Ø§Ù†
    { uni: 'ÙˆÙˆ', ali: 'Ùˆâ€ŒÙˆ' },
];

function convert(type) {
    let box = document.getElementById("textBox");
    let text = box.value;

    if (type === 'toAli') {
        conversionMap.forEach(item => {
            text = text.split(item.uni).join(item.ali);
        });
        box.style.fontFamily = "Ali_K_Ali, 'Ali_K_Standard'";
    } else {
        // Ù„Û†Ø¬ÛŒÚ©ÛŒ ÙˆÛ•Ø±Ú¯ÛÚ•Ø§Ù† Ø¨Û† ÛŒÙˆÙ†ÛŒÚ©Û†Ø¯ (Fallback Logic Ù„ÛØ±Û•Ø¯Ø§ÛŒÛ•)
        conversionMap.forEach(item => {
            text = text.split(item.ali).join(item.uni);
        });
        box.style.fontFamily = document.getElementById('fontSelect').value;
    }

    box.value = text;
    updateStats();
    showStatus(type === 'toUni' ? "âœ… Ú©Ø±Ø§ Ø¨Û• ÛŒÙˆÙ†ÛŒÚ©Û†Ø¯" : "ğŸ”ƒ Ú©Ø±Ø§ Ø¨Û• Ø¹Û•Ù„ÛŒ Ú©Û•ÛŒ");
}

// --- Ù‡Û•ÙˆØ§ÚµÛ•Ú©Ø§Ù† (Ú†Ø§Ú©Ú©Ø±Ø§Ùˆ Ø¨Û•Ù¾ÛÛŒ Ø¯Ø§ÙˆØ§Ú©Ø§Ø±ÛŒØª) ---
let newsList = [];
let nIdx = 0;

async function getNews() {
    const urls = [
        {n:'Ú©Ø§Ù†Ø§ÚµÛŒ Ù‡Û•Ø´Øª', u:'https://channel8.com/rss/sorani'},
        {n:'Ø§Ù„Ø¬Ø²ÛŒØ±Ø©', u:'https://www.aljazeera.net/rss'},
        {n:'SkyNews', u:'https://www.skynewsarabia.com/rss.xml'},
        {n:'RT Arabic', u:'https://arabic.rt.com/rss/'},
        {n:'Ø³Û•Ø¨Ø§Ø­ (INA)', u:'https://www.ina.iq/rss.xml'}
    ];
    
    let tempSources = [];
    const results = await Promise.allSettled(urls.map(async (s) => {
        try {
            const r = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(s.u)}&t=${Date.now()}`);
            const d = await r.json();
            if (d.status === 'ok' && d.items && d.items.length > 0) {
                return d.items.slice(0, 5).map(i => ({t: i.title, l: i.link, s: s.n}));
            }
        } catch(e) {}
        return null;
    }));

    results.forEach(result => {
        if (result.status === 'fulfilled' && result.value) tempSources.push(result.value);
    });

    let newFetchedList = [];
    for (let i = 0; i < 5; i++) {
        tempSources.forEach(source => {
            if (source[i]) newFetchedList.push(source[i]);
        });
    }

    if (newFetchedList.length > 0) {
        newsList = newFetchedList;
        nIdx = 0; 
        showNextNews(); 
    }
}

function showNextNews() {
    const el = document.getElementById('news-link');
    if (!el || newsList.length === 0) return;
    el.style.opacity = 0;
    setTimeout(() => {
        const currentNews = newsList[nIdx];
        // ÛŒÛ•Ú©Ø®Ø³ØªÙ†ÛŒ Ù¾ÛŒØªÛ•Ú©Ø§Ù† Ø¨Û† ÙÛ†Ù†ØªÛŒ Ú©ÙˆØ±Ø¯ÛŒ (Ù„Û†Ø¬ÛŒÚ©ÛŒ ÙˆÛ•Ø±Ú¯ÛÚ•ÛŒ Ú©Û†Ù†)
        let cleanTitle = currentNews.t.replace(/ÙŠ/g, 'ÛŒ').replace(/Ùƒ/g, 'Ú©');
        el.innerHTML = `<span style="color:#d32f2f; font-weight:bold;">${currentNews.s}:</span> ${cleanTitle}`;
        el.href = currentNews.l;
        el.style.opacity = 1;
        nIdx = (nIdx + 1) % newsList.length;
    }, 300);
}

// --- Ø³ØªØ§ÛŒÙ„ Ùˆ Ø®Ø²Ù…Û•ØªÚ¯ÙˆØ²Ø§Ø±ÛŒÛŒÛ•Ú©Ø§Ù† ---
let currentSize = 20;
function changeFontSize(delta) {
    currentSize += delta;
    document.getElementById('textBox').style.fontSize = currentSize + 'px';
}

function changeFont() {
    document.getElementById('textBox').style.fontFamily = document.getElementById('fontSelect').value;
}

async function updateMarket() {
    try {
        const goldRes = await fetch('https://api.binance.com/api/v3/ticker/price?symbol=PAXGUSDT');
        const goldData = await goldRes.json();
        document.getElementById('gold').innerText = `ğŸŸ¡ Ø²ÛÚ•: $${parseFloat(goldData.price).toLocaleString()}`;

        const fetchOil = async (symbol) => {
            const res = await fetch('https://api.allorigins.win/get?url=' + encodeURIComponent(`https://query1.finance.yahoo.com/v8/finance/chart/${symbol}`));
            const data = JSON.parse((await res.json()).contents);
            return data.chart.result[0].meta.regularMarketPrice;
        };
        const brent = await fetchOil('BZ=F');
        const wti = await fetchOil('CL=F');
        const opec = await fetchOil('USO');
        document.getElementById('oil-brent').innerText = `ğŸ›¢ï¸ Ø¨Ø±ÛÙ†Øª: $${brent.toFixed(2)}`;
        document.getElementById('oil-wti').innerText = `â›½ ØªÛ•Ú©Ø³Ø§Ø³: $${wti.toFixed(2)}`;
        document.getElementById('oil-opec').innerText = `ğŸŒ Ø¦Û†Ù¾ÛÚ©: $${opec.toFixed(2)}`;
        document.getElementById('oil-basra').innerText = `ğŸ‡®ğŸ‡¶ Ø¨Û•Ø³Ú•Û•: $${(brent - 2.50).toFixed(2)}`;
    } catch (e) {}
}

async function updateWeather() {
    try {
        const r = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=35.56&longitude=45.42&current_weather=true`);
        const d = await r.json();
        document.getElementById('weather').innerText = `ğŸŒ¡ï¸ ${Math.round(d.current_weather.temperature)}Â°C`;
    } catch(e){}
}

function updateStats() {
    const textarea = document.getElementById('textBox');
    const fullText = textarea.value.trim();
    const selectedText = textarea.value.substring(textarea.selectionStart, textarea.selectionEnd).trim();
    const totalWords = fullText ? fullText.split(/\s+/).length : 0;
    const selectedWords = selectedText ? selectedText.split(/\s+/).length : 0;
    const statsEl = document.getElementById('textStats');
    statsEl.innerText = selectedWords > 0 ? `ÙˆØ´Û•: ${totalWords} (Ø¯ÛŒØ§Ø±ÛŒÚ©Ø±Ø§Ùˆ: ${selectedWords})` : `ÙˆØ´Û•: ${totalWords}`;
}

// --- Ø¦ÛŒØ´Ù¾ÛÚ©Ø±Ø¯Ù†ÛŒ Ø¨Û•Ø±Ù†Ø§Ù…Û• ---
function initApp() {
    setInterval(() => {
        const n = new Date();
        const days = ["ÛŒÛ•Ú©Ø´Û•Ù…Ù…Û•","Ø¯ÙˆÙˆØ´Û•Ù…Ù…Û•","Ø³ÛØ´Û•Ù…Ù…Û•","Ú†ÙˆØ§Ø±Ø´Û•Ù…Ù…Û•","Ù¾ÛÙ†Ø¬Ø´Û•Ù…Ù…Û•","Ù‡Û•ÛŒÙ†ÛŒ","Ø´Û•Ù…Ù…Û•"];
        document.getElementById('clock').innerText = `${days[n.getDay()]} ${n.toLocaleTimeString('en-GB',{hour12:false})}`;
    }, 1000);

    getNews();
    setInterval(showNextNews, 5000); 
    setInterval(getNews, 1800000); 

    updateWeather();
    setInterval(updateWeather, 1800000);

    updateMarket();
    setInterval(updateMarket, 300000);

    document.addEventListener('selectionchange', updateStats);
    window.onclick = function(event) {
        const modal = document.getElementById("aboutModal");
        if (event.target == modal) modal.style.display = "none";
    }
}

function toggleAbout() {
    const modal = document.getElementById("aboutModal");
    modal.style.display = (modal.style.display === "block") ? "none" : "block";
}
function toggleM() { document.getElementById("mDrop").classList.toggle("show"); }
function toggleT() { document.body.classList.toggle('dark-mode'); }
function showStatus(m) { const s = document.getElementById("status"); s.innerText=m; s.style.display="block"; setTimeout(() => s.style.display = "none", 2000); }
function copyText() {
    const textarea = document.getElementById("textBox");
    const start = textarea.selectionStart;
    const finish = textarea.selectionEnd;
    const textToCopy = (start !== finish) ? textarea.value.substring(start, finish) : textarea.value;
    if (textToCopy) {
        navigator.clipboard.writeText(textToCopy).then(() => {
            showStatus(start !== finish ? "ğŸ“‹ Ø¯Û•Ù‚ Ú©Û†Ù¾ÛŒ Ú©Ø±Ø§" : "ğŸ“‹ Ù‡Û•Ù…ÙˆÙˆ Ø¯Û•Ù‚Û•Ú©Û• Ú©Û†Ù¾ÛŒ Ú©Ø±Ø§");
        });
    }
}
function clearText() { if(confirm("Ø³Ú•ÛŒÙ†Û•ÙˆÛ•ØŸ")) { document.getElementById("textBox").value=""; updateStats(); } }
</script>
</body>
</html>
